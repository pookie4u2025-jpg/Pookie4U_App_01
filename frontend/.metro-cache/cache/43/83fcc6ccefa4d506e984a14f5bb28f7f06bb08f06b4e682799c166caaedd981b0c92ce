{"dependencies":[{"name":"../proxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":72,"index":87}}],"key":"7t6p+wFqa3TKNDAU+WlzybERgtk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _proxy = require(_dependencyMap[0], \"../proxy\");\n  /**\n   * This class is responsible for managing the registry of CSS animation\n   * keyframes. It keeps track of views that use specific animations and handles\n   * native-side registration. Animation keyframes are registered on the native\n   * side only when used for the first time and unregistered when removed from the\n   * last view that uses them.\n   */\n  class CSSKeyframesRegistry {\n    cssTextToNameMap_ = new Map();\n    nameToKeyframes_ = new Map();\n    get(nameOrCssText) {\n      const result = this.nameToKeyframes_.get(nameOrCssText);\n      if (result) {\n        return result.keyframesRule;\n      }\n      const animationName = this.cssTextToNameMap_.get(nameOrCssText);\n      if (animationName) {\n        return this.nameToKeyframes_.get(animationName)?.keyframesRule;\n      }\n    }\n    add(keyframesRule, viewName, viewTag) {\n      const existingKeyframesEntry = this.nameToKeyframes_.get(keyframesRule.name);\n      const existingComponentEntry = existingKeyframesEntry?.usedBy[viewName];\n      if (existingComponentEntry) {\n        // Just add the view tag to the existing component entry if keyframes\n        // for the specific animation and component name are already registered\n        existingComponentEntry.add(viewTag);\n        return;\n      }\n\n      // Otherwise, we have to register keyframes preprocessed for the specific\n      // component name\n      if (existingKeyframesEntry) {\n        existingKeyframesEntry.usedBy[viewName] = new Set([viewTag]);\n      } else {\n        this.nameToKeyframes_.set(keyframesRule.name, {\n          keyframesRule,\n          usedBy: {\n            [viewName]: new Set([viewTag])\n          }\n        });\n      }\n\n      // Store the keyframes to name mapping in order to reuse the same\n      // animation name when possible (when the same inline keyframes object\n      // is used)\n      this.cssTextToNameMap_.set(keyframesRule.cssText, keyframesRule.name);\n\n      // Register animation keyframes only if they are not already registered\n      // (when they are added for the first time)\n      (0, _proxy.registerCSSKeyframes)(keyframesRule.name, viewName, keyframesRule.getNormalizedKeyframesConfig(viewName));\n    }\n    remove(animationName, viewName, viewTag) {\n      const keyframesEntry = this.nameToKeyframes_.get(animationName);\n      if (!keyframesEntry) {\n        return;\n      }\n      const componentEntry = keyframesEntry.usedBy[viewName];\n      componentEntry.delete(viewTag);\n      if (componentEntry.size === 0) {\n        delete keyframesEntry.usedBy[viewName];\n        (0, _proxy.unregisterCSSKeyframes)(animationName, viewName);\n      }\n      if (Object.keys(keyframesEntry.usedBy).length === 0) {\n        this.nameToKeyframes_.delete(animationName);\n        this.cssTextToNameMap_.delete(keyframesEntry.keyframesRule.cssText);\n      }\n    }\n    clear() {\n      this.nameToKeyframes_.clear();\n      this.cssTextToNameMap_.clear();\n    }\n  }\n  const cssKeyframesRegistry = new CSSKeyframesRegistry();\n  var _default = cssKeyframesRegistry;\n});","lineCount":89,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,78,0,"Object"],[7,8,78,0],[7,9,78,0,"defineProperty"],[7,23,78,0],[7,24,78,0,"exports"],[7,31,78,0],[8,4,78,0,"enumerable"],[8,14,78,0],[9,4,78,0,"get"],[9,7,78,0],[9,18,78,0,"get"],[9,19,78,0],[10,6,78,0],[10,13,78,0,"_default"],[10,21,78,0],[11,4,78,0],[12,2,78,0],[13,2,3,0],[13,6,3,0,"_proxy"],[13,12,3,0],[13,15,3,0,"require"],[13,22,3,0],[13,23,3,0,"_dependencyMap"],[13,37,3,0],[14,2,4,0],[15,0,5,0],[16,0,6,0],[17,0,7,0],[18,0,8,0],[19,0,9,0],[20,0,10,0],[21,2,11,0],[21,8,11,6,"CSSKeyframesRegistry"],[21,28,11,26],[21,29,11,27],[22,4,12,2,"cssTextToNameMap_"],[22,21,12,19],[22,24,12,22],[22,28,12,26,"Map"],[22,31,12,29],[22,32,12,30],[22,33,12,31],[23,4,13,2,"nameToKeyframes_"],[23,20,13,18],[23,23,13,21],[23,27,13,25,"Map"],[23,30,13,28],[23,31,13,29],[23,32,13,30],[24,4,14,2,"get"],[24,7,14,5,"get"],[24,8,14,6,"nameOrCssText"],[24,21,14,19],[24,23,14,21],[25,6,15,4],[25,12,15,10,"result"],[25,18,15,16],[25,21,15,19],[25,25,15,23],[25,26,15,24,"nameToKeyframes_"],[25,42,15,40],[25,43,15,41,"get"],[25,46,15,44],[25,47,15,45,"nameOrCssText"],[25,60,15,58],[25,61,15,59],[26,6,16,4],[26,10,16,8,"result"],[26,16,16,14],[26,18,16,16],[27,8,17,6],[27,15,17,13,"result"],[27,21,17,19],[27,22,17,20,"keyframesRule"],[27,35,17,33],[28,6,18,4],[29,6,19,4],[29,12,19,10,"animationName"],[29,25,19,23],[29,28,19,26],[29,32,19,30],[29,33,19,31,"cssTextToNameMap_"],[29,50,19,48],[29,51,19,49,"get"],[29,54,19,52],[29,55,19,53,"nameOrCssText"],[29,68,19,66],[29,69,19,67],[30,6,20,4],[30,10,20,8,"animationName"],[30,23,20,21],[30,25,20,23],[31,8,21,6],[31,15,21,13],[31,19,21,17],[31,20,21,18,"nameToKeyframes_"],[31,36,21,34],[31,37,21,35,"get"],[31,40,21,38],[31,41,21,39,"animationName"],[31,54,21,52],[31,55,21,53],[31,57,21,55,"keyframesRule"],[31,70,21,68],[32,6,22,4],[33,4,23,2],[34,4,24,2,"add"],[34,7,24,5,"add"],[34,8,24,6,"keyframesRule"],[34,21,24,19],[34,23,24,21,"viewName"],[34,31,24,29],[34,33,24,31,"viewTag"],[34,40,24,38],[34,42,24,40],[35,6,25,4],[35,12,25,10,"existingKeyframesEntry"],[35,34,25,32],[35,37,25,35],[35,41,25,39],[35,42,25,40,"nameToKeyframes_"],[35,58,25,56],[35,59,25,57,"get"],[35,62,25,60],[35,63,25,61,"keyframesRule"],[35,76,25,74],[35,77,25,75,"name"],[35,81,25,79],[35,82,25,80],[36,6,26,4],[36,12,26,10,"existingComponentEntry"],[36,34,26,32],[36,37,26,35,"existingKeyframesEntry"],[36,59,26,57],[36,61,26,59,"usedBy"],[36,67,26,65],[36,68,26,66,"viewName"],[36,76,26,74],[36,77,26,75],[37,6,27,4],[37,10,27,8,"existingComponentEntry"],[37,32,27,30],[37,34,27,32],[38,8,28,6],[39,8,29,6],[40,8,30,6,"existingComponentEntry"],[40,30,30,28],[40,31,30,29,"add"],[40,34,30,32],[40,35,30,33,"viewTag"],[40,42,30,40],[40,43,30,41],[41,8,31,6],[42,6,32,4],[44,6,34,4],[45,6,35,4],[46,6,36,4],[46,10,36,8,"existingKeyframesEntry"],[46,32,36,30],[46,34,36,32],[47,8,37,6,"existingKeyframesEntry"],[47,30,37,28],[47,31,37,29,"usedBy"],[47,37,37,35],[47,38,37,36,"viewName"],[47,46,37,44],[47,47,37,45],[47,50,37,48],[47,54,37,52,"Set"],[47,57,37,55],[47,58,37,56],[47,59,37,57,"viewTag"],[47,66,37,64],[47,67,37,65],[47,68,37,66],[48,6,38,4],[48,7,38,5],[48,13,38,11],[49,8,39,6],[49,12,39,10],[49,13,39,11,"nameToKeyframes_"],[49,29,39,27],[49,30,39,28,"set"],[49,33,39,31],[49,34,39,32,"keyframesRule"],[49,47,39,45],[49,48,39,46,"name"],[49,52,39,50],[49,54,39,52],[50,10,40,8,"keyframesRule"],[50,23,40,21],[51,10,41,8,"usedBy"],[51,16,41,14],[51,18,41,16],[52,12,42,10],[52,13,42,11,"viewName"],[52,21,42,19],[52,24,42,22],[52,28,42,26,"Set"],[52,31,42,29],[52,32,42,30],[52,33,42,31,"viewTag"],[52,40,42,38],[52,41,42,39],[53,10,43,8],[54,8,44,6],[54,9,44,7],[54,10,44,8],[55,6,45,4],[57,6,47,4],[58,6,48,4],[59,6,49,4],[60,6,50,4],[60,10,50,8],[60,11,50,9,"cssTextToNameMap_"],[60,28,50,26],[60,29,50,27,"set"],[60,32,50,30],[60,33,50,31,"keyframesRule"],[60,46,50,44],[60,47,50,45,"cssText"],[60,54,50,52],[60,56,50,54,"keyframesRule"],[60,69,50,67],[60,70,50,68,"name"],[60,74,50,72],[60,75,50,73],[62,6,52,4],[63,6,53,4],[64,6,54,4],[64,10,54,4,"registerCSSKeyframes"],[64,16,54,24],[64,17,54,24,"registerCSSKeyframes"],[64,37,54,24],[64,39,54,25,"keyframesRule"],[64,52,54,38],[64,53,54,39,"name"],[64,57,54,43],[64,59,54,45,"viewName"],[64,67,54,53],[64,69,54,55,"keyframesRule"],[64,82,54,68],[64,83,54,69,"getNormalizedKeyframesConfig"],[64,111,54,97],[64,112,54,98,"viewName"],[64,120,54,106],[64,121,54,107],[64,122,54,108],[65,4,55,2],[66,4,56,2,"remove"],[66,10,56,8,"remove"],[66,11,56,9,"animationName"],[66,24,56,22],[66,26,56,24,"viewName"],[66,34,56,32],[66,36,56,34,"viewTag"],[66,43,56,41],[66,45,56,43],[67,6,57,4],[67,12,57,10,"keyframesEntry"],[67,26,57,24],[67,29,57,27],[67,33,57,31],[67,34,57,32,"nameToKeyframes_"],[67,50,57,48],[67,51,57,49,"get"],[67,54,57,52],[67,55,57,53,"animationName"],[67,68,57,66],[67,69,57,67],[68,6,58,4],[68,10,58,8],[68,11,58,9,"keyframesEntry"],[68,25,58,23],[68,27,58,25],[69,8,59,6],[70,6,60,4],[71,6,61,4],[71,12,61,10,"componentEntry"],[71,26,61,24],[71,29,61,27,"keyframesEntry"],[71,43,61,41],[71,44,61,42,"usedBy"],[71,50,61,48],[71,51,61,49,"viewName"],[71,59,61,57],[71,60,61,58],[72,6,62,4,"componentEntry"],[72,20,62,18],[72,21,62,19,"delete"],[72,27,62,25],[72,28,62,26,"viewTag"],[72,35,62,33],[72,36,62,34],[73,6,63,4],[73,10,63,8,"componentEntry"],[73,24,63,22],[73,25,63,23,"size"],[73,29,63,27],[73,34,63,32],[73,35,63,33],[73,37,63,35],[74,8,64,6],[74,15,64,13,"keyframesEntry"],[74,29,64,27],[74,30,64,28,"usedBy"],[74,36,64,34],[74,37,64,35,"viewName"],[74,45,64,43],[74,46,64,44],[75,8,65,6],[75,12,65,6,"unregisterCSSKeyframes"],[75,18,65,28],[75,19,65,28,"unregisterCSSKeyframes"],[75,41,65,28],[75,43,65,29,"animationName"],[75,56,65,42],[75,58,65,44,"viewName"],[75,66,65,52],[75,67,65,53],[76,6,66,4],[77,6,67,4],[77,10,67,8,"Object"],[77,16,67,14],[77,17,67,15,"keys"],[77,21,67,19],[77,22,67,20,"keyframesEntry"],[77,36,67,34],[77,37,67,35,"usedBy"],[77,43,67,41],[77,44,67,42],[77,45,67,43,"length"],[77,51,67,49],[77,56,67,54],[77,57,67,55],[77,59,67,57],[78,8,68,6],[78,12,68,10],[78,13,68,11,"nameToKeyframes_"],[78,29,68,27],[78,30,68,28,"delete"],[78,36,68,34],[78,37,68,35,"animationName"],[78,50,68,48],[78,51,68,49],[79,8,69,6],[79,12,69,10],[79,13,69,11,"cssTextToNameMap_"],[79,30,69,28],[79,31,69,29,"delete"],[79,37,69,35],[79,38,69,36,"keyframesEntry"],[79,52,69,50],[79,53,69,51,"keyframesRule"],[79,66,69,64],[79,67,69,65,"cssText"],[79,74,69,72],[79,75,69,73],[80,6,70,4],[81,4,71,2],[82,4,72,2,"clear"],[82,9,72,7,"clear"],[82,10,72,7],[82,12,72,10],[83,6,73,4],[83,10,73,8],[83,11,73,9,"nameToKeyframes_"],[83,27,73,25],[83,28,73,26,"clear"],[83,33,73,31],[83,34,73,32],[83,35,73,33],[84,6,74,4],[84,10,74,8],[84,11,74,9,"cssTextToNameMap_"],[84,28,74,26],[84,29,74,27,"clear"],[84,34,74,32],[84,35,74,33],[84,36,74,34],[85,4,75,2],[86,2,76,0],[87,2,77,0],[87,8,77,6,"cssKeyframesRegistry"],[87,28,77,26],[87,31,77,29],[87,35,77,33,"CSSKeyframesRegistry"],[87,55,77,53],[87,56,77,54],[87,57,77,55],[88,2,78,0],[88,6,78,0,"_default"],[88,14,78,0],[88,17,78,15,"cssKeyframesRegistry"],[88,37,78,35],[89,0,78,36],[89,3]],"functionMap":{"names":["<global>","CSSKeyframesRegistry","get","add","remove","clear"],"mappings":"AAA;ACU;ECG;GDS;EEC;GF+B;EGC;GHe;EIC;GJG;CDC"},"hasCjsExports":false},"type":"js/module"}]}