{"dependencies":[{"name":"invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"4HPAaDQ25ZwZ2dzTLatXuUucZUM=","exportNames":["*"],"imports":1}},{"name":"./Fetch","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":39,"index":74}}],"key":"PeuZJEzLUzE71YmlrqcRrF53N6s=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.issuerWithWellKnownUrl = issuerWithWellKnownUrl;\n  exports.fetchDiscoveryAsync = fetchDiscoveryAsync;\n  exports.resolveDiscoveryAsync = resolveDiscoveryAsync;\n  var _invariant = require(_dependencyMap[0], \"invariant\");\n  var invariant = _interopDefault(_invariant);\n  var _Fetch = require(_dependencyMap[1], \"./Fetch\");\n  /**\n   * Append the well known resources path and OpenID connect discovery document path to a URL\n   * https://tools.ietf.org/html/rfc5785\n   */\n  function issuerWithWellKnownUrl(issuer) {\n    return `${issuer}/.well-known/openid-configuration`;\n  }\n  // @needsAudit\n  /**\n   * Fetch a `DiscoveryDocument` from a well-known resource provider that supports auto discovery.\n   * @param issuer An `Issuer` URL to fetch from.\n   * @return Returns a discovery document that can be used for authentication.\n   */\n  async function fetchDiscoveryAsync(issuer) {\n    const json = await (0, _Fetch.requestAsync)(issuerWithWellKnownUrl(issuer), {\n      dataType: 'json',\n      method: 'GET'\n    });\n    return {\n      discoveryDocument: json,\n      authorizationEndpoint: json.authorization_endpoint,\n      tokenEndpoint: json.token_endpoint,\n      revocationEndpoint: json.revocation_endpoint,\n      userInfoEndpoint: json.userinfo_endpoint,\n      endSessionEndpoint: json.end_session_endpoint,\n      registrationEndpoint: json.registration_endpoint\n    };\n  }\n  // @needsAudit\n  /**\n   * Utility method for resolving the discovery document from an issuer or object.\n   *\n   * @param issuerOrDiscovery\n   */\n  async function resolveDiscoveryAsync(issuerOrDiscovery) {\n    (0, invariant.default)(issuerOrDiscovery && !['number', 'boolean'].includes(typeof issuerOrDiscovery), 'Expected a valid discovery object or issuer URL');\n    if (typeof issuerOrDiscovery === 'string') {\n      return await fetchDiscoveryAsync(issuerOrDiscovery);\n    }\n    return issuerOrDiscovery;\n  }\n});","lineCount":59,"map":[[12,2,7,0,"exports"],[12,9,7,0],[12,10,7,0,"issuerWithWellKnownUrl"],[12,32,7,0],[12,35,7,0,"issuerWithWellKnownUrl"],[12,57,7,0],[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"fetchDiscoveryAsync"],[13,29,16,0],[13,32,16,0,"fetchDiscoveryAsync"],[13,51,16,0],[14,2,37,0,"exports"],[14,9,37,0],[14,10,37,0,"resolveDiscoveryAsync"],[14,31,37,0],[14,34,37,0,"resolveDiscoveryAsync"],[14,55,37,0],[15,2,1,0],[15,6,1,0,"_invariant"],[15,16,1,0],[15,19,1,0,"require"],[15,26,1,0],[15,27,1,0,"_dependencyMap"],[15,41,1,0],[16,2,1,0],[16,6,1,0,"invariant"],[16,15,1,0],[16,18,1,0,"_interopDefault"],[16,33,1,0],[16,34,1,0,"_invariant"],[16,44,1,0],[17,2,2,0],[17,6,2,0,"_Fetch"],[17,12,2,0],[17,15,2,0,"require"],[17,22,2,0],[17,23,2,0,"_dependencyMap"],[17,37,2,0],[18,2,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,2,7,7],[22,11,7,16,"issuerWithWellKnownUrl"],[22,33,7,38,"issuerWithWellKnownUrl"],[22,34,7,39,"issuer"],[22,40,7,45],[22,42,7,47],[23,4,8,4],[23,11,8,11],[23,14,8,14,"issuer"],[23,20,8,20],[23,55,8,55],[24,2,9,0],[25,2,10,0],[26,2,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,2,16,7],[31,17,16,22,"fetchDiscoveryAsync"],[31,36,16,41,"fetchDiscoveryAsync"],[31,37,16,42,"issuer"],[31,43,16,48],[31,45,16,50],[32,4,17,4],[32,10,17,10,"json"],[32,14,17,14],[32,17,17,17],[32,23,17,23],[32,27,17,23,"requestAsync"],[32,33,17,35],[32,34,17,35,"requestAsync"],[32,46,17,35],[32,48,17,36,"issuerWithWellKnownUrl"],[32,70,17,58],[32,71,17,59,"issuer"],[32,77,17,65],[32,78,17,66],[32,80,17,68],[33,6,18,8,"dataType"],[33,14,18,16],[33,16,18,18],[33,22,18,24],[34,6,19,8,"method"],[34,12,19,14],[34,14,19,16],[35,4,20,4],[35,5,20,5],[35,6,20,6],[36,4,21,4],[36,11,21,11],[37,6,22,8,"discoveryDocument"],[37,23,22,25],[37,25,22,27,"json"],[37,29,22,31],[38,6,23,8,"authorizationEndpoint"],[38,27,23,29],[38,29,23,31,"json"],[38,33,23,35],[38,34,23,36,"authorization_endpoint"],[38,56,23,58],[39,6,24,8,"tokenEndpoint"],[39,19,24,21],[39,21,24,23,"json"],[39,25,24,27],[39,26,24,28,"token_endpoint"],[39,40,24,42],[40,6,25,8,"revocationEndpoint"],[40,24,25,26],[40,26,25,28,"json"],[40,30,25,32],[40,31,25,33,"revocation_endpoint"],[40,50,25,52],[41,6,26,8,"userInfoEndpoint"],[41,22,26,24],[41,24,26,26,"json"],[41,28,26,30],[41,29,26,31,"userinfo_endpoint"],[41,46,26,48],[42,6,27,8,"endSessionEndpoint"],[42,24,27,26],[42,26,27,28,"json"],[42,30,27,32],[42,31,27,33,"end_session_endpoint"],[42,51,27,53],[43,6,28,8,"registrationEndpoint"],[43,26,28,28],[43,28,28,30,"json"],[43,32,28,34],[43,33,28,35,"registration_endpoint"],[44,4,29,4],[44,5,29,5],[45,2,30,0],[46,2,31,0],[47,2,32,0],[48,0,33,0],[49,0,34,0],[50,0,35,0],[51,0,36,0],[52,2,37,7],[52,17,37,22,"resolveDiscoveryAsync"],[52,38,37,43,"resolveDiscoveryAsync"],[52,39,37,44,"issuerOrDiscovery"],[52,56,37,61],[52,58,37,63],[53,4,38,4],[53,8,38,4,"invariant"],[53,17,38,13],[53,18,38,13,"default"],[53,25,38,13],[53,27,38,14,"issuerOrDiscovery"],[53,44,38,31],[53,48,38,35],[53,49,38,36],[53,50,38,37],[53,58,38,45],[53,60,38,47],[53,69,38,56],[53,70,38,57],[53,71,38,58,"includes"],[53,79,38,66],[53,80,38,67],[53,87,38,74,"issuerOrDiscovery"],[53,104,38,91],[53,105,38,92],[53,107,38,94],[53,156,38,143],[53,157,38,144],[54,4,39,4],[54,8,39,8],[54,15,39,15,"issuerOrDiscovery"],[54,32,39,32],[54,37,39,37],[54,45,39,45],[54,47,39,47],[55,6,40,8],[55,13,40,15],[55,19,40,21,"fetchDiscoveryAsync"],[55,38,40,40],[55,39,40,41,"issuerOrDiscovery"],[55,56,40,58],[55,57,40,59],[56,4,41,4],[57,4,42,4],[57,11,42,11,"issuerOrDiscovery"],[57,28,42,28],[58,2,43,0],[59,0,43,1],[59,3]],"functionMap":{"names":["<global>","issuerWithWellKnownUrl","fetchDiscoveryAsync","resolveDiscoveryAsync"],"mappings":"AAA;OCM;CDE;OEO;CFc;OGO;CHM"},"hasCjsExports":false},"type":"js/module"}]}