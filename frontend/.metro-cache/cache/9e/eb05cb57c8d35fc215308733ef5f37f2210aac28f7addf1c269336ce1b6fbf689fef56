{"dependencies":[{"name":"../../../common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":50,"index":65}}],"key":"AI/OUAil3Z67B7bUiML5DX0dlDY=","exportNames":["*"],"imports":1}},{"name":"../../utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":58,"index":124}}],"key":"ByXat9lt9duIJLDmSeH0V+tRq1s=","exportNames":["*"],"imports":1}},{"name":"../proxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":125},"end":{"line":5,"column":40,"index":165}}],"key":"7t6p+wFqa3TKNDAU+WlzybERgtk=","exportNames":["*"],"imports":1}},{"name":"../registry","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":166},"end":{"line":6,"column":63,"index":229}}],"key":"+3OEoU3axqFWWFPE7MDTZN/6GXQ=","exportNames":["*"],"imports":1}},{"name":"./CSSAnimationsManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":230},"end":{"line":7,"column":58,"index":288}}],"key":"X2ik9T2ZsWfj6PeeQq7cEYjcYpE=","exportNames":["*"],"imports":1}},{"name":"./CSSTransitionsManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":289},"end":{"line":8,"column":60,"index":349}}],"key":"phIeZpg1RoTOiEN4jyxPHJoIHaw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return CSSManager;\n    }\n  });\n  var _common = require(_dependencyMap[0], \"../../../common\");\n  var _utils = require(_dependencyMap[1], \"../../utils\");\n  var _proxy = require(_dependencyMap[2], \"../proxy\");\n  var _registry = require(_dependencyMap[3], \"../registry\");\n  var _CSSAnimationsManager = require(_dependencyMap[4], \"./CSSAnimationsManager\");\n  var CSSAnimationsManager = _interopDefault(_CSSAnimationsManager);\n  var _CSSTransitionsManager = require(_dependencyMap[5], \"./CSSTransitionsManager\");\n  var CSSTransitionsManager = _interopDefault(_CSSTransitionsManager);\n  class CSSManager {\n    styleBuilder = null;\n    isFirstUpdate = true;\n    constructor({\n      shadowNodeWrapper,\n      viewTag,\n      viewName = 'RCTView'\n    }) {\n      const tag = this.viewTag = viewTag;\n      const wrapper = shadowNodeWrapper;\n      this.viewName = viewName;\n      this.styleBuilder = (0, _registry.hasStyleBuilder)(viewName) ? (0, _registry.getStyleBuilder)(viewName) : null;\n      this.cssAnimationsManager = new CSSAnimationsManager.default(wrapper, viewName, tag);\n      this.cssTransitionsManager = new CSSTransitionsManager.default(wrapper, tag);\n    }\n    update(style) {\n      const [animationProperties, transitionProperties, filteredStyle] = (0, _utils.filterCSSAndStyleProperties)(style);\n      if (!this.styleBuilder && (animationProperties || transitionProperties)) {\n        throw new _common.ReanimatedError(`Tried to apply CSS animations to ${this.viewName} which is not supported`);\n      }\n      const normalizedStyle = this.styleBuilder?.buildFrom(filteredStyle);\n\n      // If the update is called during the first css style update, we won't\n      // trigger CSS transitions and set styles before attaching CSS transitions\n      if (this.isFirstUpdate && normalizedStyle) {\n        (0, _proxy.setViewStyle)(this.viewTag, normalizedStyle);\n      }\n      this.cssTransitionsManager.update(transitionProperties);\n      this.cssAnimationsManager.update(animationProperties);\n\n      // If the current update is not the fist one, we want to update CSS\n      // animations and transitions first and update the style then to make\n      // sure that the new transition is fired with new settings (like duration)\n      if (!this.isFirstUpdate && normalizedStyle) {\n        (0, _proxy.setViewStyle)(this.viewTag, normalizedStyle);\n      }\n      this.isFirstUpdate = false;\n    }\n    unmountCleanup() {\n      this.cssAnimationsManager.unmountCleanup();\n      this.cssTransitionsManager.unmountCleanup();\n    }\n  }\n});","lineCount":69,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,9,15,"Object"],[12,8,9,15],[12,9,9,15,"defineProperty"],[12,23,9,15],[12,24,9,15,"exports"],[12,31,9,15],[13,4,9,15,"enumerable"],[13,14,9,15],[14,4,9,15,"get"],[14,7,9,15],[14,18,9,15,"get"],[14,19,9,15],[15,6,9,15],[15,13,9,15,"CSSManager"],[15,23,9,15],[16,4,9,15],[17,2,9,15],[18,2,3,0],[18,6,3,0,"_common"],[18,13,3,0],[18,16,3,0,"require"],[18,23,3,0],[18,24,3,0,"_dependencyMap"],[18,38,3,0],[19,2,4,0],[19,6,4,0,"_utils"],[19,12,4,0],[19,15,4,0,"require"],[19,22,4,0],[19,23,4,0,"_dependencyMap"],[19,37,4,0],[20,2,5,0],[20,6,5,0,"_proxy"],[20,12,5,0],[20,15,5,0,"require"],[20,22,5,0],[20,23,5,0,"_dependencyMap"],[20,37,5,0],[21,2,6,0],[21,6,6,0,"_registry"],[21,15,6,0],[21,18,6,0,"require"],[21,25,6,0],[21,26,6,0,"_dependencyMap"],[21,40,6,0],[22,2,7,0],[22,6,7,0,"_CSSAnimationsManager"],[22,27,7,0],[22,30,7,0,"require"],[22,37,7,0],[22,38,7,0,"_dependencyMap"],[22,52,7,0],[23,2,7,0],[23,6,7,0,"CSSAnimationsManager"],[23,26,7,0],[23,29,7,0,"_interopDefault"],[23,44,7,0],[23,45,7,0,"_CSSAnimationsManager"],[23,66,7,0],[24,2,8,0],[24,6,8,0,"_CSSTransitionsManager"],[24,28,8,0],[24,31,8,0,"require"],[24,38,8,0],[24,39,8,0,"_dependencyMap"],[24,53,8,0],[25,2,8,0],[25,6,8,0,"CSSTransitionsManager"],[25,27,8,0],[25,30,8,0,"_interopDefault"],[25,45,8,0],[25,46,8,0,"_CSSTransitionsManager"],[25,68,8,0],[26,2,9,15],[26,8,9,21,"CSSManager"],[26,18,9,31],[26,19,9,32],[27,4,10,2,"styleBuilder"],[27,16,10,14],[27,19,10,17],[27,23,10,21],[28,4,11,2,"isFirstUpdate"],[28,17,11,15],[28,20,11,18],[28,24,11,22],[29,4,12,2,"constructor"],[29,15,12,13,"constructor"],[29,16,12,14],[30,6,13,4,"shadowNodeWrapper"],[30,23,13,21],[31,6,14,4,"viewTag"],[31,13,14,11],[32,6,15,4,"viewName"],[32,14,15,12],[32,17,15,15],[33,4,16,2],[33,5,16,3],[33,7,16,5],[34,6,17,4],[34,12,17,10,"tag"],[34,15,17,13],[34,18,17,16],[34,22,17,20],[34,23,17,21,"viewTag"],[34,30,17,28],[34,33,17,31,"viewTag"],[34,40,17,38],[35,6,18,4],[35,12,18,10,"wrapper"],[35,19,18,17],[35,22,18,20,"shadowNodeWrapper"],[35,39,18,37],[36,6,19,4],[36,10,19,8],[36,11,19,9,"viewName"],[36,19,19,17],[36,22,19,20,"viewName"],[36,30,19,28],[37,6,20,4],[37,10,20,8],[37,11,20,9,"styleBuilder"],[37,23,20,21],[37,26,20,24],[37,30,20,24,"hasStyleBuilder"],[37,39,20,39],[37,40,20,39,"hasStyleBuilder"],[37,55,20,39],[37,57,20,40,"viewName"],[37,65,20,48],[37,66,20,49],[37,69,20,52],[37,73,20,52,"getStyleBuilder"],[37,82,20,67],[37,83,20,67,"getStyleBuilder"],[37,98,20,67],[37,100,20,68,"viewName"],[37,108,20,76],[37,109,20,77],[37,112,20,80],[37,116,20,84],[38,6,21,4],[38,10,21,8],[38,11,21,9,"cssAnimationsManager"],[38,31,21,29],[38,34,21,32],[38,38,21,36,"CSSAnimationsManager"],[38,58,21,56],[38,59,21,56,"default"],[38,66,21,56],[38,67,21,57,"wrapper"],[38,74,21,64],[38,76,21,66,"viewName"],[38,84,21,74],[38,86,21,76,"tag"],[38,89,21,79],[38,90,21,80],[39,6,22,4],[39,10,22,8],[39,11,22,9,"cssTransitionsManager"],[39,32,22,30],[39,35,22,33],[39,39,22,37,"CSSTransitionsManager"],[39,60,22,58],[39,61,22,58,"default"],[39,68,22,58],[39,69,22,59,"wrapper"],[39,76,22,66],[39,78,22,68,"tag"],[39,81,22,71],[39,82,22,72],[40,4,23,2],[41,4,24,2,"update"],[41,10,24,8,"update"],[41,11,24,9,"style"],[41,16,24,14],[41,18,24,16],[42,6,25,4],[42,12,25,10],[42,13,25,11,"animationProperties"],[42,32,25,30],[42,34,25,32,"transitionProperties"],[42,54,25,52],[42,56,25,54,"filteredStyle"],[42,69,25,67],[42,70,25,68],[42,73,25,71],[42,77,25,71,"filterCSSAndStyleProperties"],[42,83,25,98],[42,84,25,98,"filterCSSAndStyleProperties"],[42,111,25,98],[42,113,25,99,"style"],[42,118,25,104],[42,119,25,105],[43,6,26,4],[43,10,26,8],[43,11,26,9],[43,15,26,13],[43,16,26,14,"styleBuilder"],[43,28,26,26],[43,33,26,31,"animationProperties"],[43,52,26,50],[43,56,26,54,"transitionProperties"],[43,76,26,74],[43,77,26,75],[43,79,26,77],[44,8,27,6],[44,14,27,12],[44,18,27,16,"ReanimatedError"],[44,25,27,31],[44,26,27,31,"ReanimatedError"],[44,41,27,31],[44,42,27,32],[44,78,27,68],[44,82,27,72],[44,83,27,73,"viewName"],[44,91,27,81],[44,116,27,106],[44,117,27,107],[45,6,28,4],[46,6,29,4],[46,12,29,10,"normalizedStyle"],[46,27,29,25],[46,30,29,28],[46,34,29,32],[46,35,29,33,"styleBuilder"],[46,47,29,45],[46,49,29,47,"buildFrom"],[46,58,29,56],[46,59,29,57,"filteredStyle"],[46,72,29,70],[46,73,29,71],[48,6,31,4],[49,6,32,4],[50,6,33,4],[50,10,33,8],[50,14,33,12],[50,15,33,13,"isFirstUpdate"],[50,28,33,26],[50,32,33,30,"normalizedStyle"],[50,47,33,45],[50,49,33,47],[51,8,34,6],[51,12,34,6,"setViewStyle"],[51,18,34,18],[51,19,34,18,"setViewStyle"],[51,31,34,18],[51,33,34,19],[51,37,34,23],[51,38,34,24,"viewTag"],[51,45,34,31],[51,47,34,33,"normalizedStyle"],[51,62,34,48],[51,63,34,49],[52,6,35,4],[53,6,36,4],[53,10,36,8],[53,11,36,9,"cssTransitionsManager"],[53,32,36,30],[53,33,36,31,"update"],[53,39,36,37],[53,40,36,38,"transitionProperties"],[53,60,36,58],[53,61,36,59],[54,6,37,4],[54,10,37,8],[54,11,37,9,"cssAnimationsManager"],[54,31,37,29],[54,32,37,30,"update"],[54,38,37,36],[54,39,37,37,"animationProperties"],[54,58,37,56],[54,59,37,57],[56,6,39,4],[57,6,40,4],[58,6,41,4],[59,6,42,4],[59,10,42,8],[59,11,42,9],[59,15,42,13],[59,16,42,14,"isFirstUpdate"],[59,29,42,27],[59,33,42,31,"normalizedStyle"],[59,48,42,46],[59,50,42,48],[60,8,43,6],[60,12,43,6,"setViewStyle"],[60,18,43,18],[60,19,43,18,"setViewStyle"],[60,31,43,18],[60,33,43,19],[60,37,43,23],[60,38,43,24,"viewTag"],[60,45,43,31],[60,47,43,33,"normalizedStyle"],[60,62,43,48],[60,63,43,49],[61,6,44,4],[62,6,45,4],[62,10,45,8],[62,11,45,9,"isFirstUpdate"],[62,24,45,22],[62,27,45,25],[62,32,45,30],[63,4,46,2],[64,4,47,2,"unmountCleanup"],[64,18,47,16,"unmountCleanup"],[64,19,47,16],[64,21,47,19],[65,6,48,4],[65,10,48,8],[65,11,48,9,"cssAnimationsManager"],[65,31,48,29],[65,32,48,30,"unmountCleanup"],[65,46,48,44],[65,47,48,45],[65,48,48,46],[66,6,49,4],[66,10,49,8],[66,11,49,9,"cssTransitionsManager"],[66,32,49,30],[66,33,49,31,"unmountCleanup"],[66,47,49,45],[66,48,49,46],[66,49,49,47],[67,4,50,2],[68,2,51,0],[69,0,51,1],[69,3]],"functionMap":{"names":["<global>","CSSManager","constructor","update","unmountCleanup"],"mappings":"AAA;eCQ;ECG;GDW;EEC;GFsB;EGC;GHG;CDC"},"hasCjsExports":false},"type":"js/module"}]}