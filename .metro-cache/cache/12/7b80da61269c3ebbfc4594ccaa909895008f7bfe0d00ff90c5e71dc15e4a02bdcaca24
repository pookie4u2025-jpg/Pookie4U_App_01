{"dependencies":[{"name":"../../common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":76,"index":91}}],"key":"IDJz4HWb8BkS18xB4AVSbpQcs+Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.configureWebCSSAnimations = configureWebCSSAnimations;\n  exports.insertCSSAnimation = insertCSSAnimation;\n  exports.removeCSSAnimation = removeCSSAnimation;\n  var _common = require(_dependencyMap[0], \"../../common\");\n  const CSS_ANIMATIONS_STYLE_TAG_ID = 'ReanimatedCSSStyleTag';\n\n  // Since we cannot remove keyframe from DOM by its name, we have to store its id\n  const cssNameToIndex = new Map();\n  const cssNameList = [];\n  function configureWebCSSAnimations() {\n    if (!_common.IS_WINDOW_AVAILABLE ||\n    // Without this check SSR crashes because document is undefined (NextExample on CI)\n    document.getElementById(CSS_ANIMATIONS_STYLE_TAG_ID) !== null) {\n      return;\n    }\n    const cssStyleTag = document.createElement('style');\n    cssStyleTag.id = CSS_ANIMATIONS_STYLE_TAG_ID;\n    cssStyleTag.onload = () => {\n      if (!cssStyleTag.sheet) {\n        _common.logger.error('Failed to create CSS animations stylesheet.');\n      }\n    };\n    document.head.append(cssStyleTag);\n  }\n  function getStyleSheet() {\n    return document.getElementById(CSS_ANIMATIONS_STYLE_TAG_ID)?.sheet ?? null;\n  }\n  function insertCSSAnimation(animationName, keyframes) {\n    // Without window availability check SSR crashes because document is undefined\n    // (NextExample on CI)\n    if (!_common.IS_WINDOW_AVAILABLE || cssNameToIndex.has(animationName)) {\n      return;\n    }\n    const sheet = getStyleSheet();\n    if (!sheet) {\n      _common.logger.error('Failed to create CSS animations stylesheet.');\n      return;\n    }\n    const animation = `@keyframes ${animationName} { ${keyframes} }`;\n    sheet.insertRule(animation, 0);\n    cssNameList.unshift(animationName);\n    cssNameToIndex.set(animationName, 0);\n    for (let i = 1; i < cssNameList.length; ++i) {\n      const nextCSSName = cssNameList[i];\n      const nextCSSIndex = cssNameToIndex.get(nextCSSName);\n      if (nextCSSIndex === undefined) {\n        throw new _common.ReanimatedError('Failed to obtain CSS animation index.');\n      }\n      cssNameToIndex.set(cssNameList[i], nextCSSIndex + 1);\n    }\n  }\n  function removeCSSAnimation(animationName) {\n    // Without this check SSR crashes because document is undefined (NextExample on CI)\n    if (!_common.IS_WINDOW_AVAILABLE) {\n      return;\n    }\n    const sheet = getStyleSheet();\n    const currentCSSIndex = cssNameToIndex.get(animationName);\n    if (currentCSSIndex === undefined) {\n      throw new _common.ReanimatedError('Failed to obtain CSS animation index.');\n    }\n    sheet?.deleteRule(currentCSSIndex);\n    cssNameList.splice(currentCSSIndex, 1);\n    cssNameToIndex.delete(animationName);\n    for (let i = currentCSSIndex; i < cssNameList.length; ++i) {\n      const nextCSSName = cssNameList[i];\n      const nextCSSIndex = cssNameToIndex.get(nextCSSName);\n      if (nextCSSIndex === undefined) {\n        throw new _common.ReanimatedError('Failed to obtain CSS animation index.');\n      }\n      cssNameToIndex.set(cssNameList[i], nextCSSIndex - 1);\n    }\n  }\n});","lineCount":80,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,9,0,"exports"],[7,9,9,0],[7,10,9,0,"configureWebCSSAnimations"],[7,35,9,0],[7,38,9,0,"configureWebCSSAnimations"],[7,63,9,0],[8,2,27,0,"exports"],[8,9,27,0],[8,10,27,0,"insertCSSAnimation"],[8,28,27,0],[8,31,27,0,"insertCSSAnimation"],[8,49,27,0],[9,2,51,0,"exports"],[9,9,51,0],[9,10,51,0,"removeCSSAnimation"],[9,28,51,0],[9,31,51,0,"removeCSSAnimation"],[9,49,51,0],[10,2,3,0],[10,6,3,0,"_common"],[10,13,3,0],[10,16,3,0,"require"],[10,23,3,0],[10,24,3,0,"_dependencyMap"],[10,38,3,0],[11,2,4,0],[11,8,4,6,"CSS_ANIMATIONS_STYLE_TAG_ID"],[11,35,4,33],[11,38,4,36],[11,61,4,59],[13,2,6,0],[14,2,7,0],[14,8,7,6,"cssNameToIndex"],[14,22,7,20],[14,25,7,23],[14,29,7,27,"Map"],[14,32,7,30],[14,33,7,31],[14,34,7,32],[15,2,8,0],[15,8,8,6,"cssNameList"],[15,19,8,17],[15,22,8,20],[15,24,8,22],[16,2,9,7],[16,11,9,16,"configureWebCSSAnimations"],[16,36,9,41,"configureWebCSSAnimations"],[16,37,9,41],[16,39,9,44],[17,4,10,2],[17,8,10,6],[17,9,10,7,"IS_WINDOW_AVAILABLE"],[17,16,10,26],[17,17,10,26,"IS_WINDOW_AVAILABLE"],[17,36,10,26],[18,4,11,2],[19,4,12,2,"document"],[19,12,12,10],[19,13,12,11,"getElementById"],[19,27,12,25],[19,28,12,26,"CSS_ANIMATIONS_STYLE_TAG_ID"],[19,55,12,53],[19,56,12,54],[19,61,12,59],[19,65,12,63],[19,67,12,65],[20,6,13,4],[21,4,14,2],[22,4,15,2],[22,10,15,8,"cssStyleTag"],[22,21,15,19],[22,24,15,22,"document"],[22,32,15,30],[22,33,15,31,"createElement"],[22,46,15,44],[22,47,15,45],[22,54,15,52],[22,55,15,53],[23,4,16,2,"cssStyleTag"],[23,15,16,13],[23,16,16,14,"id"],[23,18,16,16],[23,21,16,19,"CSS_ANIMATIONS_STYLE_TAG_ID"],[23,48,16,46],[24,4,17,2,"cssStyleTag"],[24,15,17,13],[24,16,17,14,"onload"],[24,22,17,20],[24,25,17,23],[24,31,17,29],[25,6,18,4],[25,10,18,8],[25,11,18,9,"cssStyleTag"],[25,22,18,20],[25,23,18,21,"sheet"],[25,28,18,26],[25,30,18,28],[26,8,19,6,"logger"],[26,15,19,12],[26,16,19,12,"logger"],[26,22,19,12],[26,23,19,13,"error"],[26,28,19,18],[26,29,19,19],[26,74,19,64],[26,75,19,65],[27,6,20,4],[28,4,21,2],[28,5,21,3],[29,4,22,2,"document"],[29,12,22,10],[29,13,22,11,"head"],[29,17,22,15],[29,18,22,16,"append"],[29,24,22,22],[29,25,22,23,"cssStyleTag"],[29,36,22,34],[29,37,22,35],[30,2,23,0],[31,2,24,0],[31,11,24,9,"getStyleSheet"],[31,24,24,22,"getStyleSheet"],[31,25,24,22],[31,27,24,25],[32,4,25,2],[32,11,25,9,"document"],[32,19,25,17],[32,20,25,18,"getElementById"],[32,34,25,32],[32,35,25,33,"CSS_ANIMATIONS_STYLE_TAG_ID"],[32,62,25,60],[32,63,25,61],[32,65,25,63,"sheet"],[32,70,25,68],[32,74,25,72],[32,78,25,76],[33,2,26,0],[34,2,27,7],[34,11,27,16,"insertCSSAnimation"],[34,29,27,34,"insertCSSAnimation"],[34,30,27,35,"animationName"],[34,43,27,48],[34,45,27,50,"keyframes"],[34,54,27,59],[34,56,27,61],[35,4,28,2],[36,4,29,2],[37,4,30,2],[37,8,30,6],[37,9,30,7,"IS_WINDOW_AVAILABLE"],[37,16,30,26],[37,17,30,26,"IS_WINDOW_AVAILABLE"],[37,36,30,26],[37,40,30,30,"cssNameToIndex"],[37,54,30,44],[37,55,30,45,"has"],[37,58,30,48],[37,59,30,49,"animationName"],[37,72,30,62],[37,73,30,63],[37,75,30,65],[38,6,31,4],[39,4,32,2],[40,4,33,2],[40,10,33,8,"sheet"],[40,15,33,13],[40,18,33,16,"getStyleSheet"],[40,31,33,29],[40,32,33,30],[40,33,33,31],[41,4,34,2],[41,8,34,6],[41,9,34,7,"sheet"],[41,14,34,12],[41,16,34,14],[42,6,35,4,"logger"],[42,13,35,10],[42,14,35,10,"logger"],[42,20,35,10],[42,21,35,11,"error"],[42,26,35,16],[42,27,35,17],[42,72,35,62],[42,73,35,63],[43,6,36,4],[44,4,37,2],[45,4,38,2],[45,10,38,8,"animation"],[45,19,38,17],[45,22,38,20],[45,36,38,34,"animationName"],[45,49,38,47],[45,55,38,53,"keyframes"],[45,64,38,62],[45,68,38,66],[46,4,39,2,"sheet"],[46,9,39,7],[46,10,39,8,"insertRule"],[46,20,39,18],[46,21,39,19,"animation"],[46,30,39,28],[46,32,39,30],[46,33,39,31],[46,34,39,32],[47,4,40,2,"cssNameList"],[47,15,40,13],[47,16,40,14,"unshift"],[47,23,40,21],[47,24,40,22,"animationName"],[47,37,40,35],[47,38,40,36],[48,4,41,2,"cssNameToIndex"],[48,18,41,16],[48,19,41,17,"set"],[48,22,41,20],[48,23,41,21,"animationName"],[48,36,41,34],[48,38,41,36],[48,39,41,37],[48,40,41,38],[49,4,42,2],[49,9,42,7],[49,13,42,11,"i"],[49,14,42,12],[49,17,42,15],[49,18,42,16],[49,20,42,18,"i"],[49,21,42,19],[49,24,42,22,"cssNameList"],[49,35,42,33],[49,36,42,34,"length"],[49,42,42,40],[49,44,42,42],[49,46,42,44,"i"],[49,47,42,45],[49,49,42,47],[50,6,43,4],[50,12,43,10,"nextCSSName"],[50,23,43,21],[50,26,43,24,"cssNameList"],[50,37,43,35],[50,38,43,36,"i"],[50,39,43,37],[50,40,43,38],[51,6,44,4],[51,12,44,10,"nextCSSIndex"],[51,24,44,22],[51,27,44,25,"cssNameToIndex"],[51,41,44,39],[51,42,44,40,"get"],[51,45,44,43],[51,46,44,44,"nextCSSName"],[51,57,44,55],[51,58,44,56],[52,6,45,4],[52,10,45,8,"nextCSSIndex"],[52,22,45,20],[52,27,45,25,"undefined"],[52,36,45,34],[52,38,45,36],[53,8,46,6],[53,14,46,12],[53,18,46,16,"ReanimatedError"],[53,25,46,31],[53,26,46,31,"ReanimatedError"],[53,41,46,31],[53,42,46,32],[53,81,46,71],[53,82,46,72],[54,6,47,4],[55,6,48,4,"cssNameToIndex"],[55,20,48,18],[55,21,48,19,"set"],[55,24,48,22],[55,25,48,23,"cssNameList"],[55,36,48,34],[55,37,48,35,"i"],[55,38,48,36],[55,39,48,37],[55,41,48,39,"nextCSSIndex"],[55,53,48,51],[55,56,48,54],[55,57,48,55],[55,58,48,56],[56,4,49,2],[57,2,50,0],[58,2,51,7],[58,11,51,16,"removeCSSAnimation"],[58,29,51,34,"removeCSSAnimation"],[58,30,51,35,"animationName"],[58,43,51,48],[58,45,51,50],[59,4,52,2],[60,4,53,2],[60,8,53,6],[60,9,53,7,"IS_WINDOW_AVAILABLE"],[60,16,53,26],[60,17,53,26,"IS_WINDOW_AVAILABLE"],[60,36,53,26],[60,38,53,28],[61,6,54,4],[62,4,55,2],[63,4,56,2],[63,10,56,8,"sheet"],[63,15,56,13],[63,18,56,16,"getStyleSheet"],[63,31,56,29],[63,32,56,30],[63,33,56,31],[64,4,57,2],[64,10,57,8,"currentCSSIndex"],[64,25,57,23],[64,28,57,26,"cssNameToIndex"],[64,42,57,40],[64,43,57,41,"get"],[64,46,57,44],[64,47,57,45,"animationName"],[64,60,57,58],[64,61,57,59],[65,4,58,2],[65,8,58,6,"currentCSSIndex"],[65,23,58,21],[65,28,58,26,"undefined"],[65,37,58,35],[65,39,58,37],[66,6,59,4],[66,12,59,10],[66,16,59,14,"ReanimatedError"],[66,23,59,29],[66,24,59,29,"ReanimatedError"],[66,39,59,29],[66,40,59,30],[66,79,59,69],[66,80,59,70],[67,4,60,2],[68,4,61,2,"sheet"],[68,9,61,7],[68,11,61,9,"deleteRule"],[68,21,61,19],[68,22,61,20,"currentCSSIndex"],[68,37,61,35],[68,38,61,36],[69,4,62,2,"cssNameList"],[69,15,62,13],[69,16,62,14,"splice"],[69,22,62,20],[69,23,62,21,"currentCSSIndex"],[69,38,62,36],[69,40,62,38],[69,41,62,39],[69,42,62,40],[70,4,63,2,"cssNameToIndex"],[70,18,63,16],[70,19,63,17,"delete"],[70,25,63,23],[70,26,63,24,"animationName"],[70,39,63,37],[70,40,63,38],[71,4,64,2],[71,9,64,7],[71,13,64,11,"i"],[71,14,64,12],[71,17,64,15,"currentCSSIndex"],[71,32,64,30],[71,34,64,32,"i"],[71,35,64,33],[71,38,64,36,"cssNameList"],[71,49,64,47],[71,50,64,48,"length"],[71,56,64,54],[71,58,64,56],[71,60,64,58,"i"],[71,61,64,59],[71,63,64,61],[72,6,65,4],[72,12,65,10,"nextCSSName"],[72,23,65,21],[72,26,65,24,"cssNameList"],[72,37,65,35],[72,38,65,36,"i"],[72,39,65,37],[72,40,65,38],[73,6,66,4],[73,12,66,10,"nextCSSIndex"],[73,24,66,22],[73,27,66,25,"cssNameToIndex"],[73,41,66,39],[73,42,66,40,"get"],[73,45,66,43],[73,46,66,44,"nextCSSName"],[73,57,66,55],[73,58,66,56],[74,6,67,4],[74,10,67,8,"nextCSSIndex"],[74,22,67,20],[74,27,67,25,"undefined"],[74,36,67,34],[74,38,67,36],[75,8,68,6],[75,14,68,12],[75,18,68,16,"ReanimatedError"],[75,25,68,31],[75,26,68,31,"ReanimatedError"],[75,41,68,31],[75,42,68,32],[75,81,68,71],[75,82,68,72],[76,6,69,4],[77,6,70,4,"cssNameToIndex"],[77,20,70,18],[77,21,70,19,"set"],[77,24,70,22],[77,25,70,23,"cssNameList"],[77,36,70,34],[77,37,70,35,"i"],[77,38,70,36],[77,39,70,37],[77,41,70,39,"nextCSSIndex"],[77,53,70,51],[77,56,70,54],[77,57,70,55],[77,58,70,56],[78,4,71,2],[79,2,72,0],[80,0,72,1],[80,3]],"functionMap":{"names":["<global>","configureWebCSSAnimations","cssStyleTag.onload","getStyleSheet","insertCSSAnimation","removeCSSAnimation"],"mappings":"AAA;OCQ;uBCQ;GDI;CDE;AGC;CHE;OIC;CJuB;OKC;CLqB"},"hasCjsExports":false},"type":"js/module"}]}