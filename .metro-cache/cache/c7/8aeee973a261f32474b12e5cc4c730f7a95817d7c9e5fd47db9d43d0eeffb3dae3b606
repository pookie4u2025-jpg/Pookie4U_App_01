{"dependencies":[{"name":"../../../../common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":53,"index":68}}],"key":"lWBwZ2gfCJqIdYPstlqcFfa1xEQ=","exportNames":["*"],"imports":1}},{"name":"../../../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":69},"end":{"line":4,"column":54,"index":123}}],"key":"Wm1V4xbJi+V0U8qZIchubakwWPk=","exportNames":["*"],"imports":1}},{"name":"../../../utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":124},"end":{"line":5,"column":53,"index":177}}],"key":"4wo4OYT4MSo2InL8kiWmZxvepwE=","exportNames":["*"],"imports":1}},{"name":"../common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":178},"end":{"line":6,"column":52,"index":230}}],"key":"tbtg/nEigFLu9LmBKxGuAsZ2sgI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ERROR_MESSAGES\", {\n    enumerable: true,\n    get: function () {\n      return ERROR_MESSAGES;\n    }\n  });\n  exports.normalizeAnimationKeyframes = normalizeAnimationKeyframes;\n  var _common = require(_dependencyMap[0], \"../../../../common\");\n  var _constants = require(_dependencyMap[1], \"../../../constants\");\n  var _utils = require(_dependencyMap[2], \"../../../utils\");\n  var _common2 = require(_dependencyMap[3], \"../common\");\n  const ERROR_MESSAGES = {\n    invalidOffsetType: selector => `Invalid keyframe selector \"${selector}\". Only numbers, percentages, \"from\", and \"to\" are supported.`,\n    invalidOffsetRange: selector => `Invalid keyframe selector \"${selector}\". Expected a number between 0 and 1 or a percentage between 0% and 100%.`\n  };\n  function normalizeKeyframeSelector(keyframeSelector) {\n    const selectors = typeof keyframeSelector === 'string' ? keyframeSelector.split(',').map(k => k.trim()) : [keyframeSelector];\n    const offsets = selectors.map(selector => {\n      if (selector === 'from') {\n        return 0;\n      }\n      if (selector === 'to') {\n        return 1;\n      }\n      let offset;\n      if (typeof selector === 'number' || !isNaN(+selector)) {\n        offset = +selector;\n      } else if (_constants.PERCENTAGE_REGEX.test(selector)) {\n        offset = parseFloat(selector) / 100;\n      }\n      if (!(0, _utils.isNumber)(offset)) {\n        throw new _common.ReanimatedError(ERROR_MESSAGES.invalidOffsetType(selector));\n      }\n      if (offset < 0 || offset > 1) {\n        throw new _common.ReanimatedError(ERROR_MESSAGES.invalidOffsetRange(selector));\n      }\n      return offset;\n    });\n    return offsets;\n  }\n  function processKeyframes(keyframes, styleBuilder) {\n    return Object.entries(keyframes).flatMap(([selector, {\n      animationTimingFunction = undefined,\n      ...style\n    } = {}]) => {\n      const normalizedStyle = styleBuilder.buildFrom(style);\n      if (!normalizedStyle) {\n        return [];\n      }\n      return normalizeKeyframeSelector(selector).map(offset => ({\n        offset,\n        style: normalizedStyle,\n        timingFunction: animationTimingFunction\n      }));\n    }).sort((a, b) => a.offset - b.offset).reduce((acc, keyframe) => {\n      const lastKeyframe = acc[acc.length - 1];\n      if (lastKeyframe && lastKeyframe.offset === keyframe.offset) {\n        lastKeyframe.style = {\n          ...lastKeyframe.style,\n          ...keyframe.style\n        };\n        lastKeyframe.timingFunction = keyframe.timingFunction;\n      } else {\n        acc.push(keyframe);\n      }\n      return acc;\n    }, []);\n  }\n  function processStyleProperties(offset, style, keyframeStyle, styleBuilder) {\n    Object.entries(style).forEach(([property, value]) => {\n      if (!(0, _utils.isDefined)(value)) {\n        return;\n      }\n      if (typeof value === 'object') {\n        if (!Array.isArray(value) || styleBuilder.isSeparatelyInterpolatedArrayProperty(property)) {\n          if (!keyframeStyle[property]) {\n            keyframeStyle[property] = Array.isArray(value) ? [] : {};\n          }\n          processStyleProperties(offset, value, keyframeStyle[property], styleBuilder);\n          return;\n        }\n      }\n      if (!keyframeStyle[property]) {\n        keyframeStyle[property] = [];\n      }\n      keyframeStyle[property].push({\n        offset,\n        value\n      });\n    });\n  }\n  function normalizeAnimationKeyframes(keyframes, styleBuilder) {\n    const keyframesStyle = {};\n    const timingFunctions = {};\n    processKeyframes(keyframes, styleBuilder).forEach(({\n      offset,\n      style,\n      timingFunction\n    }) => {\n      processStyleProperties(offset, style, keyframesStyle, styleBuilder);\n      if (timingFunction && offset < 1) {\n        timingFunctions[offset] = (0, _common2.normalizeTimingFunction)(timingFunction);\n      }\n    });\n    return {\n      keyframesStyle,\n      keyframeTimingFunctions: timingFunctions\n    };\n  }\n});","lineCount":116,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,7,0,"Object"],[7,8,7,0],[7,9,7,0,"defineProperty"],[7,23,7,0],[7,24,7,0,"exports"],[7,31,7,0],[8,4,7,0,"enumerable"],[8,14,7,0],[9,4,7,0,"get"],[9,7,7,0],[9,18,7,0,"get"],[9,19,7,0],[10,6,7,0],[10,13,7,0,"ERROR_MESSAGES"],[10,27,7,0],[11,4,7,0],[12,2,7,0],[13,2,87,0,"exports"],[13,9,87,0],[13,10,87,0,"normalizeAnimationKeyframes"],[13,37,87,0],[13,40,87,0,"normalizeAnimationKeyframes"],[13,67,87,0],[14,2,3,0],[14,6,3,0,"_common"],[14,13,3,0],[14,16,3,0,"require"],[14,23,3,0],[14,24,3,0,"_dependencyMap"],[14,38,3,0],[15,2,4,0],[15,6,4,0,"_constants"],[15,16,4,0],[15,19,4,0,"require"],[15,26,4,0],[15,27,4,0,"_dependencyMap"],[15,41,4,0],[16,2,5,0],[16,6,5,0,"_utils"],[16,12,5,0],[16,15,5,0,"require"],[16,22,5,0],[16,23,5,0,"_dependencyMap"],[16,37,5,0],[17,2,6,0],[17,6,6,0,"_common2"],[17,14,6,0],[17,17,6,0,"require"],[17,24,6,0],[17,25,6,0,"_dependencyMap"],[17,39,6,0],[18,2,7,7],[18,8,7,13,"ERROR_MESSAGES"],[18,22,7,27],[18,25,7,30],[19,4,8,2,"invalidOffsetType"],[19,21,8,19],[19,23,8,21,"selector"],[19,31,8,29],[19,35,8,33],[19,65,8,63,"selector"],[19,73,8,71],[19,136,8,134],[20,4,9,2,"invalidOffsetRange"],[20,22,9,20],[20,24,9,22,"selector"],[20,32,9,30],[20,36,9,34],[20,66,9,64,"selector"],[20,74,9,72],[21,2,10,0],[21,3,10,1],[22,2,11,0],[22,11,11,9,"normalizeKeyframeSelector"],[22,36,11,34,"normalizeKeyframeSelector"],[22,37,11,35,"keyframeSelector"],[22,53,11,51],[22,55,11,53],[23,4,12,2],[23,10,12,8,"selectors"],[23,19,12,17],[23,22,12,20],[23,29,12,27,"keyframeSelector"],[23,45,12,43],[23,50,12,48],[23,58,12,56],[23,61,12,59,"keyframeSelector"],[23,77,12,75],[23,78,12,76,"split"],[23,83,12,81],[23,84,12,82],[23,87,12,85],[23,88,12,86],[23,89,12,87,"map"],[23,92,12,90],[23,93,12,91,"k"],[23,94,12,92],[23,98,12,96,"k"],[23,99,12,97],[23,100,12,98,"trim"],[23,104,12,102],[23,105,12,103],[23,106,12,104],[23,107,12,105],[23,110,12,108],[23,111,12,109,"keyframeSelector"],[23,127,12,125],[23,128,12,126],[24,4,13,2],[24,10,13,8,"offsets"],[24,17,13,15],[24,20,13,18,"selectors"],[24,29,13,27],[24,30,13,28,"map"],[24,33,13,31],[24,34,13,32,"selector"],[24,42,13,40],[24,46,13,44],[25,6,14,4],[25,10,14,8,"selector"],[25,18,14,16],[25,23,14,21],[25,29,14,27],[25,31,14,29],[26,8,15,6],[26,15,15,13],[26,16,15,14],[27,6,16,4],[28,6,17,4],[28,10,17,8,"selector"],[28,18,17,16],[28,23,17,21],[28,27,17,25],[28,29,17,27],[29,8,18,6],[29,15,18,13],[29,16,18,14],[30,6,19,4],[31,6,20,4],[31,10,20,8,"offset"],[31,16,20,14],[32,6,21,4],[32,10,21,8],[32,17,21,15,"selector"],[32,25,21,23],[32,30,21,28],[32,38,21,36],[32,42,21,40],[32,43,21,41,"isNaN"],[32,48,21,46],[32,49,21,47],[32,50,21,48,"selector"],[32,58,21,56],[32,59,21,57],[32,61,21,59],[33,8,22,6,"offset"],[33,14,22,12],[33,17,22,15],[33,18,22,16,"selector"],[33,26,22,24],[34,6,23,4],[34,7,23,5],[34,13,23,11],[34,17,23,15,"PERCENTAGE_REGEX"],[34,27,23,31],[34,28,23,31,"PERCENTAGE_REGEX"],[34,44,23,31],[34,45,23,32,"test"],[34,49,23,36],[34,50,23,37,"selector"],[34,58,23,45],[34,59,23,46],[34,61,23,48],[35,8,24,6,"offset"],[35,14,24,12],[35,17,24,15,"parseFloat"],[35,27,24,25],[35,28,24,26,"selector"],[35,36,24,34],[35,37,24,35],[35,40,24,38],[35,43,24,41],[36,6,25,4],[37,6,26,4],[37,10,26,8],[37,11,26,9],[37,15,26,9,"isNumber"],[37,21,26,17],[37,22,26,17,"isNumber"],[37,30,26,17],[37,32,26,18,"offset"],[37,38,26,24],[37,39,26,25],[37,41,26,27],[38,8,27,6],[38,14,27,12],[38,18,27,16,"ReanimatedError"],[38,25,27,31],[38,26,27,31,"ReanimatedError"],[38,41,27,31],[38,42,27,32,"ERROR_MESSAGES"],[38,56,27,46],[38,57,27,47,"invalidOffsetType"],[38,74,27,64],[38,75,27,65,"selector"],[38,83,27,73],[38,84,27,74],[38,85,27,75],[39,6,28,4],[40,6,29,4],[40,10,29,8,"offset"],[40,16,29,14],[40,19,29,17],[40,20,29,18],[40,24,29,22,"offset"],[40,30,29,28],[40,33,29,31],[40,34,29,32],[40,36,29,34],[41,8,30,6],[41,14,30,12],[41,18,30,16,"ReanimatedError"],[41,25,30,31],[41,26,30,31,"ReanimatedError"],[41,41,30,31],[41,42,30,32,"ERROR_MESSAGES"],[41,56,30,46],[41,57,30,47,"invalidOffsetRange"],[41,75,30,65],[41,76,30,66,"selector"],[41,84,30,74],[41,85,30,75],[41,86,30,76],[42,6,31,4],[43,6,32,4],[43,13,32,11,"offset"],[43,19,32,17],[44,4,33,2],[44,5,33,3],[44,6,33,4],[45,4,34,2],[45,11,34,9,"offsets"],[45,18,34,16],[46,2,35,0],[47,2,36,0],[47,11,36,9,"processKeyframes"],[47,27,36,25,"processKeyframes"],[47,28,36,26,"keyframes"],[47,37,36,35],[47,39,36,37,"styleBuilder"],[47,51,36,49],[47,53,36,51],[48,4,37,2],[48,11,37,9,"Object"],[48,17,37,15],[48,18,37,16,"entries"],[48,25,37,23],[48,26,37,24,"keyframes"],[48,35,37,33],[48,36,37,34],[48,37,37,35,"flatMap"],[48,44,37,42],[48,45,37,43],[48,46,37,44],[48,47,37,45,"selector"],[48,55,37,53],[48,57,37,55],[49,6,38,4,"animationTimingFunction"],[49,29,38,27],[49,32,38,30,"undefined"],[49,41,38,39],[50,6,39,4],[50,9,39,7,"style"],[51,4,40,2],[51,5,40,3],[51,8,40,6],[51,9,40,7],[51,10,40,8],[51,11,40,9],[51,16,40,14],[52,6,41,4],[52,12,41,10,"normalizedStyle"],[52,27,41,25],[52,30,41,28,"styleBuilder"],[52,42,41,40],[52,43,41,41,"buildFrom"],[52,52,41,50],[52,53,41,51,"style"],[52,58,41,56],[52,59,41,57],[53,6,42,4],[53,10,42,8],[53,11,42,9,"normalizedStyle"],[53,26,42,24],[53,28,42,26],[54,8,43,6],[54,15,43,13],[54,17,43,15],[55,6,44,4],[56,6,45,4],[56,13,45,11,"normalizeKeyframeSelector"],[56,38,45,36],[56,39,45,37,"selector"],[56,47,45,45],[56,48,45,46],[56,49,45,47,"map"],[56,52,45,50],[56,53,45,51,"offset"],[56,59,45,57],[56,64,45,62],[57,8,46,6,"offset"],[57,14,46,12],[58,8,47,6,"style"],[58,13,47,11],[58,15,47,13,"normalizedStyle"],[58,30,47,28],[59,8,48,6,"timingFunction"],[59,22,48,20],[59,24,48,22,"animationTimingFunction"],[60,6,49,4],[60,7,49,5],[60,8,49,6],[60,9,49,7],[61,4,50,2],[61,5,50,3],[61,6,50,4],[61,7,50,5,"sort"],[61,11,50,9],[61,12,50,10],[61,13,50,11,"a"],[61,14,50,12],[61,16,50,14,"b"],[61,17,50,15],[61,22,50,20,"a"],[61,23,50,21],[61,24,50,22,"offset"],[61,30,50,28],[61,33,50,31,"b"],[61,34,50,32],[61,35,50,33,"offset"],[61,41,50,39],[61,42,50,40],[61,43,50,41,"reduce"],[61,49,50,47],[61,50,50,48],[61,51,50,49,"acc"],[61,54,50,52],[61,56,50,54,"keyframe"],[61,64,50,62],[61,69,50,67],[62,6,51,4],[62,12,51,10,"lastKeyframe"],[62,24,51,22],[62,27,51,25,"acc"],[62,30,51,28],[62,31,51,29,"acc"],[62,34,51,32],[62,35,51,33,"length"],[62,41,51,39],[62,44,51,42],[62,45,51,43],[62,46,51,44],[63,6,52,4],[63,10,52,8,"lastKeyframe"],[63,22,52,20],[63,26,52,24,"lastKeyframe"],[63,38,52,36],[63,39,52,37,"offset"],[63,45,52,43],[63,50,52,48,"keyframe"],[63,58,52,56],[63,59,52,57,"offset"],[63,65,52,63],[63,67,52,65],[64,8,53,6,"lastKeyframe"],[64,20,53,18],[64,21,53,19,"style"],[64,26,53,24],[64,29,53,27],[65,10,54,8],[65,13,54,11,"lastKeyframe"],[65,25,54,23],[65,26,54,24,"style"],[65,31,54,29],[66,10,55,8],[66,13,55,11,"keyframe"],[66,21,55,19],[66,22,55,20,"style"],[67,8,56,6],[67,9,56,7],[68,8,57,6,"lastKeyframe"],[68,20,57,18],[68,21,57,19,"timingFunction"],[68,35,57,33],[68,38,57,36,"keyframe"],[68,46,57,44],[68,47,57,45,"timingFunction"],[68,61,57,59],[69,6,58,4],[69,7,58,5],[69,13,58,11],[70,8,59,6,"acc"],[70,11,59,9],[70,12,59,10,"push"],[70,16,59,14],[70,17,59,15,"keyframe"],[70,25,59,23],[70,26,59,24],[71,6,60,4],[72,6,61,4],[72,13,61,11,"acc"],[72,16,61,14],[73,4,62,2],[73,5,62,3],[73,7,62,5],[73,9,62,7],[73,10,62,8],[74,2,63,0],[75,2,64,0],[75,11,64,9,"processStyleProperties"],[75,33,64,31,"processStyleProperties"],[75,34,64,32,"offset"],[75,40,64,38],[75,42,64,40,"style"],[75,47,64,45],[75,49,64,47,"keyframeStyle"],[75,62,64,60],[75,64,64,62,"styleBuilder"],[75,76,64,74],[75,78,64,76],[76,4,65,2,"Object"],[76,10,65,8],[76,11,65,9,"entries"],[76,18,65,16],[76,19,65,17,"style"],[76,24,65,22],[76,25,65,23],[76,26,65,24,"forEach"],[76,33,65,31],[76,34,65,32],[76,35,65,33],[76,36,65,34,"property"],[76,44,65,42],[76,46,65,44,"value"],[76,51,65,49],[76,52,65,50],[76,57,65,55],[77,6,66,4],[77,10,66,8],[77,11,66,9],[77,15,66,9,"isDefined"],[77,21,66,18],[77,22,66,18,"isDefined"],[77,31,66,18],[77,33,66,19,"value"],[77,38,66,24],[77,39,66,25],[77,41,66,27],[78,8,67,6],[79,6,68,4],[80,6,69,4],[80,10,69,8],[80,17,69,15,"value"],[80,22,69,20],[80,27,69,25],[80,35,69,33],[80,37,69,35],[81,8,70,6],[81,12,70,10],[81,13,70,11,"Array"],[81,18,70,16],[81,19,70,17,"isArray"],[81,26,70,24],[81,27,70,25,"value"],[81,32,70,30],[81,33,70,31],[81,37,70,35,"styleBuilder"],[81,49,70,47],[81,50,70,48,"isSeparatelyInterpolatedArrayProperty"],[81,87,70,85],[81,88,70,86,"property"],[81,96,70,94],[81,97,70,95],[81,99,70,97],[82,10,71,8],[82,14,71,12],[82,15,71,13,"keyframeStyle"],[82,28,71,26],[82,29,71,27,"property"],[82,37,71,35],[82,38,71,36],[82,40,71,38],[83,12,72,10,"keyframeStyle"],[83,25,72,23],[83,26,72,24,"property"],[83,34,72,32],[83,35,72,33],[83,38,72,36,"Array"],[83,43,72,41],[83,44,72,42,"isArray"],[83,51,72,49],[83,52,72,50,"value"],[83,57,72,55],[83,58,72,56],[83,61,72,59],[83,63,72,61],[83,66,72,64],[83,67,72,65],[83,68,72,66],[84,10,73,8],[85,10,74,8,"processStyleProperties"],[85,32,74,30],[85,33,74,31,"offset"],[85,39,74,37],[85,41,74,39,"value"],[85,46,74,44],[85,48,74,46,"keyframeStyle"],[85,61,74,59],[85,62,74,60,"property"],[85,70,74,68],[85,71,74,69],[85,73,74,71,"styleBuilder"],[85,85,74,83],[85,86,74,84],[86,10,75,8],[87,8,76,6],[88,6,77,4],[89,6,78,4],[89,10,78,8],[89,11,78,9,"keyframeStyle"],[89,24,78,22],[89,25,78,23,"property"],[89,33,78,31],[89,34,78,32],[89,36,78,34],[90,8,79,6,"keyframeStyle"],[90,21,79,19],[90,22,79,20,"property"],[90,30,79,28],[90,31,79,29],[90,34,79,32],[90,36,79,34],[91,6,80,4],[92,6,81,4,"keyframeStyle"],[92,19,81,17],[92,20,81,18,"property"],[92,28,81,26],[92,29,81,27],[92,30,81,28,"push"],[92,34,81,32],[92,35,81,33],[93,8,82,6,"offset"],[93,14,82,12],[94,8,83,6,"value"],[95,6,84,4],[95,7,84,5],[95,8,84,6],[96,4,85,2],[96,5,85,3],[96,6,85,4],[97,2,86,0],[98,2,87,7],[98,11,87,16,"normalizeAnimationKeyframes"],[98,38,87,43,"normalizeAnimationKeyframes"],[98,39,87,44,"keyframes"],[98,48,87,53],[98,50,87,55,"styleBuilder"],[98,62,87,67],[98,64,87,69],[99,4,88,2],[99,10,88,8,"keyframesStyle"],[99,24,88,22],[99,27,88,25],[99,28,88,26],[99,29,88,27],[100,4,89,2],[100,10,89,8,"timingFunctions"],[100,25,89,23],[100,28,89,26],[100,29,89,27],[100,30,89,28],[101,4,90,2,"processKeyframes"],[101,20,90,18],[101,21,90,19,"keyframes"],[101,30,90,28],[101,32,90,30,"styleBuilder"],[101,44,90,42],[101,45,90,43],[101,46,90,44,"forEach"],[101,53,90,51],[101,54,90,52],[101,55,90,53],[102,6,91,4,"offset"],[102,12,91,10],[103,6,92,4,"style"],[103,11,92,9],[104,6,93,4,"timingFunction"],[105,4,94,2],[105,5,94,3],[105,10,94,8],[106,6,95,4,"processStyleProperties"],[106,28,95,26],[106,29,95,27,"offset"],[106,35,95,33],[106,37,95,35,"style"],[106,42,95,40],[106,44,95,42,"keyframesStyle"],[106,58,95,56],[106,60,95,58,"styleBuilder"],[106,72,95,70],[106,73,95,71],[107,6,96,4],[107,10,96,8,"timingFunction"],[107,24,96,22],[107,28,96,26,"offset"],[107,34,96,32],[107,37,96,35],[107,38,96,36],[107,40,96,38],[108,8,97,6,"timingFunctions"],[108,23,97,21],[108,24,97,22,"offset"],[108,30,97,28],[108,31,97,29],[108,34,97,32],[108,38,97,32,"normalizeTimingFunction"],[108,46,97,55],[108,47,97,55,"normalizeTimingFunction"],[108,70,97,55],[108,72,97,56,"timingFunction"],[108,86,97,70],[108,87,97,71],[109,6,98,4],[110,4,99,2],[110,5,99,3],[110,6,99,4],[111,4,100,2],[111,11,100,9],[112,6,101,4,"keyframesStyle"],[112,20,101,18],[113,6,102,4,"keyframeTimingFunctions"],[113,29,102,27],[113,31,102,29,"timingFunctions"],[114,4,103,2],[114,5,103,3],[115,2,104,0],[116,0,104,1],[116,3]],"functionMap":{"names":["<global>","ERROR_MESSAGES.invalidOffsetType","ERROR_MESSAGES.invalidOffsetRange","normalizeKeyframeSelector","keyframeSelector.split.map$argument_0","selectors.map$argument_0","processKeyframes","Object.entries.flatMap$argument_0","normalizeKeyframeSelector.map$argument_0","Object.entries.flatMap.sort$argument_0","Object.entries.flatMap.sort.reduce$argument_0","processStyleProperties","Object.entries.forEach$argument_0","normalizeAnimationKeyframes","processKeyframes.forEach$argument_0"],"mappings":"AAA;qBCO,iHD;sBEC,6HF;AGE;2FCC,aD;gCEC;GFoB;CHE;AMC;2CCC;mDCQ;MDI;GDC,OG,6BH,SI;GJY;CNC;AWC;gCCC;GDoB;CXC;OaC;oDCG;GDS;CbK"},"hasCjsExports":false},"type":"js/module"}]}