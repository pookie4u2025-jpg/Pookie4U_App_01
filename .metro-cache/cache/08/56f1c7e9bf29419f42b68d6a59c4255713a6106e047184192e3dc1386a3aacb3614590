{"dependencies":[{"name":"./serializable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":55,"index":70}}],"key":"Q1ItSigHtAO4fiytzQpOuly+sWI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.__installUnpacker = __installUnpacker;\n  var _serializableJs = require(_dependencyMap[0], \"./serializable.js\");\n  function __installUnpacker() {\n    // TODO: Add cache for synchronizables.\n    const serializer = !globalThis._WORKLET || globalThis._WORKLETS_BUNDLE_MODE ? (value, _) => (0, _serializableJs.createSerializable)(value) : globalThis._createSerializable;\n    function synchronizableUnpacker(synchronizableRef) {\n      const synchronizable = synchronizableRef;\n      const proxy = globalThis.__workletsModuleProxy;\n      synchronizable.__synchronizableRef = true;\n      synchronizable.getDirty = () => {\n        return proxy.synchronizableGetDirty(synchronizable);\n      };\n      synchronizable.getBlocking = () => {\n        return proxy.synchronizableGetBlocking(synchronizable);\n      };\n      synchronizable.setBlocking = valueOrFunction => {\n        let newValue;\n        if (typeof valueOrFunction === 'function') {\n          const func = valueOrFunction;\n          synchronizable.lock();\n          const prev = synchronizable.getBlocking();\n          newValue = func(prev);\n          proxy.synchronizableSetBlocking(synchronizable, serializer(newValue, undefined));\n          synchronizable.unlock();\n        } else {\n          const value = valueOrFunction;\n          newValue = value;\n          proxy.synchronizableSetBlocking(synchronizable, serializer(newValue, undefined));\n        }\n      };\n      synchronizable.lock = () => {\n        proxy.synchronizableLock(synchronizable);\n      };\n      synchronizable.unlock = () => {\n        proxy.synchronizableUnlock(synchronizable);\n      };\n      return synchronizable;\n    }\n    globalThis.__synchronizableUnpacker = synchronizableUnpacker;\n  }\n});","lineCount":47,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,4,0,"exports"],[7,9,4,0],[7,10,4,0,"__installUnpacker"],[7,27,4,0],[7,30,4,0,"__installUnpacker"],[7,47,4,0],[8,2,3,0],[8,6,3,0,"_serializableJs"],[8,21,3,0],[8,24,3,0,"require"],[8,31,3,0],[8,32,3,0,"_dependencyMap"],[8,46,3,0],[9,2,4,7],[9,11,4,16,"__installUnpacker"],[9,28,4,33,"__installUnpacker"],[9,29,4,33],[9,31,4,36],[10,4,5,2],[11,4,6,2],[11,10,6,8,"serializer"],[11,20,6,18],[11,23,6,21],[11,24,6,22,"globalThis"],[11,34,6,32],[11,35,6,33,"_WORKLET"],[11,43,6,41],[11,47,6,45,"globalThis"],[11,57,6,55],[11,58,6,56,"_WORKLETS_BUNDLE_MODE"],[11,79,6,77],[11,82,6,80],[11,83,6,81,"value"],[11,88,6,86],[11,90,6,88,"_"],[11,91,6,89],[11,96,6,94],[11,100,6,94,"createSerializable"],[11,115,6,112],[11,116,6,112,"createSerializable"],[11,134,6,112],[11,136,6,113,"value"],[11,141,6,118],[11,142,6,119],[11,145,6,122,"globalThis"],[11,155,6,132],[11,156,6,133,"_createSerializable"],[11,175,6,152],[12,4,7,2],[12,13,7,11,"synchronizableUnpacker"],[12,35,7,33,"synchronizableUnpacker"],[12,36,7,34,"synchronizableRef"],[12,53,7,51],[12,55,7,53],[13,6,8,4],[13,12,8,10,"synchronizable"],[13,26,8,24],[13,29,8,27,"synchronizableRef"],[13,46,8,44],[14,6,9,4],[14,12,9,10,"proxy"],[14,17,9,15],[14,20,9,18,"globalThis"],[14,30,9,28],[14,31,9,29,"__workletsModuleProxy"],[14,52,9,50],[15,6,10,4,"synchronizable"],[15,20,10,18],[15,21,10,19,"__synchronizableRef"],[15,40,10,38],[15,43,10,41],[15,47,10,45],[16,6,11,4,"synchronizable"],[16,20,11,18],[16,21,11,19,"getDirty"],[16,29,11,27],[16,32,11,30],[16,38,11,36],[17,8,12,6],[17,15,12,13,"proxy"],[17,20,12,18],[17,21,12,19,"synchronizableGetDirty"],[17,43,12,41],[17,44,12,42,"synchronizable"],[17,58,12,56],[17,59,12,57],[18,6,13,4],[18,7,13,5],[19,6,14,4,"synchronizable"],[19,20,14,18],[19,21,14,19,"getBlocking"],[19,32,14,30],[19,35,14,33],[19,41,14,39],[20,8,15,6],[20,15,15,13,"proxy"],[20,20,15,18],[20,21,15,19,"synchronizableGetBlocking"],[20,46,15,44],[20,47,15,45,"synchronizable"],[20,61,15,59],[20,62,15,60],[21,6,16,4],[21,7,16,5],[22,6,17,4,"synchronizable"],[22,20,17,18],[22,21,17,19,"setBlocking"],[22,32,17,30],[22,35,17,33,"valueOrFunction"],[22,50,17,48],[22,54,17,52],[23,8,18,6],[23,12,18,10,"newValue"],[23,20,18,18],[24,8,19,6],[24,12,19,10],[24,19,19,17,"valueOrFunction"],[24,34,19,32],[24,39,19,37],[24,49,19,47],[24,51,19,49],[25,10,20,8],[25,16,20,14,"func"],[25,20,20,18],[25,23,20,21,"valueOrFunction"],[25,38,20,36],[26,10,21,8,"synchronizable"],[26,24,21,22],[26,25,21,23,"lock"],[26,29,21,27],[26,30,21,28],[26,31,21,29],[27,10,22,8],[27,16,22,14,"prev"],[27,20,22,18],[27,23,22,21,"synchronizable"],[27,37,22,35],[27,38,22,36,"getBlocking"],[27,49,22,47],[27,50,22,48],[27,51,22,49],[28,10,23,8,"newValue"],[28,18,23,16],[28,21,23,19,"func"],[28,25,23,23],[28,26,23,24,"prev"],[28,30,23,28],[28,31,23,29],[29,10,24,8,"proxy"],[29,15,24,13],[29,16,24,14,"synchronizableSetBlocking"],[29,41,24,39],[29,42,24,40,"synchronizable"],[29,56,24,54],[29,58,24,56,"serializer"],[29,68,24,66],[29,69,24,67,"newValue"],[29,77,24,75],[29,79,24,77,"undefined"],[29,88,24,86],[29,89,24,87],[29,90,24,88],[30,10,25,8,"synchronizable"],[30,24,25,22],[30,25,25,23,"unlock"],[30,31,25,29],[30,32,25,30],[30,33,25,31],[31,8,26,6],[31,9,26,7],[31,15,26,13],[32,10,27,8],[32,16,27,14,"value"],[32,21,27,19],[32,24,27,22,"valueOrFunction"],[32,39,27,37],[33,10,28,8,"newValue"],[33,18,28,16],[33,21,28,19,"value"],[33,26,28,24],[34,10,29,8,"proxy"],[34,15,29,13],[34,16,29,14,"synchronizableSetBlocking"],[34,41,29,39],[34,42,29,40,"synchronizable"],[34,56,29,54],[34,58,29,56,"serializer"],[34,68,29,66],[34,69,29,67,"newValue"],[34,77,29,75],[34,79,29,77,"undefined"],[34,88,29,86],[34,89,29,87],[34,90,29,88],[35,8,30,6],[36,6,31,4],[36,7,31,5],[37,6,32,4,"synchronizable"],[37,20,32,18],[37,21,32,19,"lock"],[37,25,32,23],[37,28,32,26],[37,34,32,32],[38,8,33,6,"proxy"],[38,13,33,11],[38,14,33,12,"synchronizableLock"],[38,32,33,30],[38,33,33,31,"synchronizable"],[38,47,33,45],[38,48,33,46],[39,6,34,4],[39,7,34,5],[40,6,35,4,"synchronizable"],[40,20,35,18],[40,21,35,19,"unlock"],[40,27,35,25],[40,30,35,28],[40,36,35,34],[41,8,36,6,"proxy"],[41,13,36,11],[41,14,36,12,"synchronizableUnlock"],[41,34,36,32],[41,35,36,33,"synchronizable"],[41,49,36,47],[41,50,36,48],[42,6,37,4],[42,7,37,5],[43,6,38,4],[43,13,38,11,"synchronizable"],[43,27,38,25],[44,4,39,2],[45,4,40,2,"globalThis"],[45,14,40,12],[45,15,40,13,"__synchronizableUnpacker"],[45,39,40,37],[45,42,40,40,"synchronizableUnpacker"],[45,64,40,62],[46,2,41,0],[47,0,41,1],[47,3]],"functionMap":{"names":["<global>","__installUnpacker","<anonymous>","synchronizableUnpacker","synchronizable.getDirty","synchronizable.getBlocking","synchronizable.setBlocking","synchronizable.lock","synchronizable.unlock"],"mappings":"AAA;OCG;gFCE,uCD;EEC;8BCI;KDE;iCEC;KFE;iCGC;KHc;0BIC;KJE;4BKC;KLE;GFE;CDE"},"hasCjsExports":false},"type":"js/module"}]}