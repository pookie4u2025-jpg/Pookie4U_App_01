{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"4HPAaDQ25ZwZ2dzTLatXuUucZUM=","exportNames":["*"],"imports":1}},{"name":"./Fetch","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":39,"index":74}}],"key":"PeuZJEzLUzE71YmlrqcRrF53N6s=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.issuerWithWellKnownUrl = issuerWithWellKnownUrl;\n  exports.fetchDiscoveryAsync = fetchDiscoveryAsync;\n  exports.resolveDiscoveryAsync = resolveDiscoveryAsync;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _invariant = require(_dependencyMap[1], \"invariant\");\n  var invariant = _interopDefault(_invariant);\n  var _Fetch = require(_dependencyMap[2], \"./Fetch\");\n  /**\n   * Append the well known resources path and OpenID connect discovery document path to a URL\n   * https://tools.ietf.org/html/rfc5785\n   */\n  function issuerWithWellKnownUrl(issuer) {\n    return `${issuer}/.well-known/openid-configuration`;\n  }\n  // @needsAudit\n  /**\n   * Fetch a `DiscoveryDocument` from a well-known resource provider that supports auto discovery.\n   * @param issuer An `Issuer` URL to fetch from.\n   * @return Returns a discovery document that can be used for authentication.\n   */\n  function fetchDiscoveryAsync(_x) {\n    return _fetchDiscoveryAsync.apply(this, arguments);\n  } // @needsAudit\n  /**\n   * Utility method for resolving the discovery document from an issuer or object.\n   *\n   * @param issuerOrDiscovery\n   */\n  function _fetchDiscoveryAsync() {\n    _fetchDiscoveryAsync = (0, _asyncToGenerator.default)(function* (issuer) {\n      var json = yield (0, _Fetch.requestAsync)(issuerWithWellKnownUrl(issuer), {\n        dataType: 'json',\n        method: 'GET'\n      });\n      return {\n        discoveryDocument: json,\n        authorizationEndpoint: json.authorization_endpoint,\n        tokenEndpoint: json.token_endpoint,\n        revocationEndpoint: json.revocation_endpoint,\n        userInfoEndpoint: json.userinfo_endpoint,\n        endSessionEndpoint: json.end_session_endpoint,\n        registrationEndpoint: json.registration_endpoint\n      };\n    });\n    return _fetchDiscoveryAsync.apply(this, arguments);\n  }\n  function resolveDiscoveryAsync(_x2) {\n    return _resolveDiscoveryAsync.apply(this, arguments);\n  }\n  function _resolveDiscoveryAsync() {\n    _resolveDiscoveryAsync = (0, _asyncToGenerator.default)(function* (issuerOrDiscovery) {\n      (0, invariant.default)(issuerOrDiscovery && !['number', 'boolean'].includes(typeof issuerOrDiscovery), 'Expected a valid discovery object or issuer URL');\n      if (typeof issuerOrDiscovery === 'string') {\n        return yield fetchDiscoveryAsync(issuerOrDiscovery);\n      }\n      return issuerOrDiscovery;\n    });\n    return _resolveDiscoveryAsync.apply(this, arguments);\n  }\n});","lineCount":72,"map":[[12,2,7,0,"exports"],[12,9,7,0],[12,10,7,0,"issuerWithWellKnownUrl"],[12,32,7,0],[12,35,7,0,"issuerWithWellKnownUrl"],[12,57,7,0],[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"fetchDiscoveryAsync"],[13,29,16,0],[13,32,16,0,"fetchDiscoveryAsync"],[13,51,16,0],[14,2,37,0,"exports"],[14,9,37,0],[14,10,37,0,"resolveDiscoveryAsync"],[14,31,37,0],[14,34,37,0,"resolveDiscoveryAsync"],[14,55,37,0],[15,2,43,1],[15,6,43,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,42,43,1],[15,45,43,1,"require"],[15,52,43,1],[15,53,43,1,"_dependencyMap"],[15,67,43,1],[16,2,43,1],[16,6,43,1,"_asyncToGenerator"],[16,23,43,1],[16,26,43,1,"_interopDefault"],[16,41,43,1],[16,42,43,1,"_babelRuntimeHelpersAsyncToGenerator"],[16,78,43,1],[17,2,1,0],[17,6,1,0,"_invariant"],[17,16,1,0],[17,19,1,0,"require"],[17,26,1,0],[17,27,1,0,"_dependencyMap"],[17,41,1,0],[18,2,1,0],[18,6,1,0,"invariant"],[18,15,1,0],[18,18,1,0,"_interopDefault"],[18,33,1,0],[18,34,1,0,"_invariant"],[18,44,1,0],[19,2,2,0],[19,6,2,0,"_Fetch"],[19,12,2,0],[19,15,2,0,"require"],[19,22,2,0],[19,23,2,0,"_dependencyMap"],[19,37,2,0],[20,2,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,2,7,7],[24,11,7,16,"issuerWithWellKnownUrl"],[24,33,7,38,"issuerWithWellKnownUrl"],[24,34,7,39,"issuer"],[24,40,7,45],[24,42,7,47],[25,4,8,4],[25,11,8,11],[25,14,8,14,"issuer"],[25,20,8,20],[25,55,8,55],[26,2,9,0],[27,2,10,0],[28,2,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,2,11,0],[33,11,16,22,"fetchDiscoveryAsync"],[33,30,16,41,"fetchDiscoveryAsync"],[33,31,16,41,"_x"],[33,33,16,41],[34,4,16,41],[34,11,16,41,"_fetchDiscoveryAsync"],[34,31,16,41],[34,32,16,41,"apply"],[34,37,16,41],[34,44,16,41,"arguments"],[34,53,16,41],[35,2,16,41],[35,4,31,0],[36,2,32,0],[37,0,33,0],[38,0,34,0],[39,0,35,0],[40,0,36,0],[41,2,32,0],[41,11,32,0,"_fetchDiscoveryAsync"],[41,32,32,0],[42,4,32,0,"_fetchDiscoveryAsync"],[42,24,32,0],[42,31,32,0,"_asyncToGenerator"],[42,48,32,0],[42,49,32,0,"default"],[42,56,32,0],[42,58,16,7],[42,69,16,42,"issuer"],[42,75,16,48],[42,77,16,50],[43,6,17,4],[43,10,17,10,"json"],[43,14,17,14],[43,23,17,23],[43,27,17,23,"requestAsync"],[43,33,17,35],[43,34,17,35,"requestAsync"],[43,46,17,35],[43,48,17,36,"issuerWithWellKnownUrl"],[43,70,17,58],[43,71,17,59,"issuer"],[43,77,17,65],[43,78,17,66],[43,80,17,68],[44,8,18,8,"dataType"],[44,16,18,16],[44,18,18,18],[44,24,18,24],[45,8,19,8,"method"],[45,14,19,14],[45,16,19,16],[46,6,20,4],[46,7,20,5],[46,8,20,6],[47,6,21,4],[47,13,21,11],[48,8,22,8,"discoveryDocument"],[48,25,22,25],[48,27,22,27,"json"],[48,31,22,31],[49,8,23,8,"authorizationEndpoint"],[49,29,23,29],[49,31,23,31,"json"],[49,35,23,35],[49,36,23,36,"authorization_endpoint"],[49,58,23,58],[50,8,24,8,"tokenEndpoint"],[50,21,24,21],[50,23,24,23,"json"],[50,27,24,27],[50,28,24,28,"token_endpoint"],[50,42,24,42],[51,8,25,8,"revocationEndpoint"],[51,26,25,26],[51,28,25,28,"json"],[51,32,25,32],[51,33,25,33,"revocation_endpoint"],[51,52,25,52],[52,8,26,8,"userInfoEndpoint"],[52,24,26,24],[52,26,26,26,"json"],[52,30,26,30],[52,31,26,31,"userinfo_endpoint"],[52,48,26,48],[53,8,27,8,"endSessionEndpoint"],[53,26,27,26],[53,28,27,28,"json"],[53,32,27,32],[53,33,27,33,"end_session_endpoint"],[53,53,27,53],[54,8,28,8,"registrationEndpoint"],[54,28,28,28],[54,30,28,30,"json"],[54,34,28,34],[54,35,28,35,"registration_endpoint"],[55,6,29,4],[55,7,29,5],[56,4,30,0],[56,5,30,1],[57,4,30,1],[57,11,30,1,"_fetchDiscoveryAsync"],[57,31,30,1],[57,32,30,1,"apply"],[57,37,30,1],[57,44,30,1,"arguments"],[57,53,30,1],[58,2,30,1],[59,2,30,1],[59,11,37,22,"resolveDiscoveryAsync"],[59,32,37,43,"resolveDiscoveryAsync"],[59,33,37,43,"_x2"],[59,36,37,43],[60,4,37,43],[60,11,37,43,"_resolveDiscoveryAsync"],[60,33,37,43],[60,34,37,43,"apply"],[60,39,37,43],[60,46,37,43,"arguments"],[60,55,37,43],[61,2,37,43],[62,2,37,43],[62,11,37,43,"_resolveDiscoveryAsync"],[62,34,37,43],[63,4,37,43,"_resolveDiscoveryAsync"],[63,26,37,43],[63,33,37,43,"_asyncToGenerator"],[63,50,37,43],[63,51,37,43,"default"],[63,58,37,43],[63,60,37,7],[63,71,37,44,"issuerOrDiscovery"],[63,88,37,61],[63,90,37,63],[64,6,38,4],[64,10,38,4,"invariant"],[64,19,38,13],[64,20,38,13,"default"],[64,27,38,13],[64,29,38,14,"issuerOrDiscovery"],[64,46,38,31],[64,50,38,35],[64,51,38,36],[64,52,38,37],[64,60,38,45],[64,62,38,47],[64,71,38,56],[64,72,38,57],[64,73,38,58,"includes"],[64,81,38,66],[64,82,38,67],[64,89,38,74,"issuerOrDiscovery"],[64,106,38,91],[64,107,38,92],[64,109,38,94],[64,158,38,143],[64,159,38,144],[65,6,39,4],[65,10,39,8],[65,17,39,15,"issuerOrDiscovery"],[65,34,39,32],[65,39,39,37],[65,47,39,45],[65,49,39,47],[66,8,40,8],[66,21,40,21,"fetchDiscoveryAsync"],[66,40,40,40],[66,41,40,41,"issuerOrDiscovery"],[66,58,40,58],[66,59,40,59],[67,6,41,4],[68,6,42,4],[68,13,42,11,"issuerOrDiscovery"],[68,30,42,28],[69,4,43,0],[69,5,43,1],[70,4,43,1],[70,11,43,1,"_resolveDiscoveryAsync"],[70,33,43,1],[70,34,43,1,"apply"],[70,39,43,1],[70,46,43,1,"arguments"],[70,55,43,1],[71,2,43,1],[72,0,43,1],[72,3]],"functionMap":{"names":["<global>","issuerWithWellKnownUrl","fetchDiscoveryAsync","resolveDiscoveryAsync"],"mappings":"AAA;OCM;CDE;OEO;CFc;OGO;CHM"},"hasCjsExports":false},"type":"js/module"}]}